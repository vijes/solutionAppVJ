<div>
  <h2>Clientes</h2>
  <div class="search-bar">
    <input type="text" placeholder="Buscar cliente..." [(ngModel)]="searchTerm" (input)="onSearchChange()">
    <button class="primary" (click)="openModal()"> Nuevo </button>
  </div>

  <!-- Modal -->
  <div class="modal-overlay" *ngIf="showModal">
    <div class="modal-content">
      <div class="modal-header">
        <h3>{{ editingId ? 'Editar Cliente' : 'Nuevo Cliente' }}</h3>
        <button class="close-btn" (click)="closeModal()">&times;</button>
      </div>
      <form (ngSubmit)="handleSubmit()">
        <div class="form-group">
          <label>Nombre</label>
          <input name="nombre" [(ngModel)]="form.nombre" required />
        </div>
        <div class="form-group">
          <label>Género</label>
          <select name="genero" [(ngModel)]="form.genero">
            <option value="Masculino">Masculino</option>
            <option value="Femenino">Femenino</option>
          </select>
        </div>
        <div class="form-group">
          <label>Edad</label>
          <input name="edad" type="number" [(ngModel)]="form.edad" required />
        </div>
        <div class="form-group">
          <label>Identificación</label>
          <input name="identificacion" [(ngModel)]="form.identificacion" required />
        </div>
        <div class="form-group">
          <label>Dirección</label>
          <input name="direccion" [(ngModel)]="form.direccion" required />
        </div>
        <div class="form-group">
          <label>Teléfono</label>
          <input name="telefono" [(ngModel)]="form.telefono" required />
        </div>
        <div class="form-group">
          <label>Contraseña</label>
          <input name="contrasena" type="password" [(ngModel)]="form.contrasena" required />
        </div>
        <div class="form-group">
          <label>
            <input name="estado" type="checkbox" [(ngModel)]="form.estado" /> Estado (Activo)
          </label>
        </div>
        <button type="submit" class="primary">{{ editingId ? 'Actualizar' : 'Guardar' }}</button>
        <button type="button" class="secondary" (click)="closeModal()">Cancelar</button>
      </form>
    </div>
  </div>

  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Nombre</th>
          <th>Género</th>
          <th>Edad</th>
          <th>Identificación</th>
          <th>Dirección</th>
          <th>Teléfono</th>
          <th>Estado</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let c of filteredClientes">
          <td>{{ c.nombre }}</td>
          <td>{{ c.genero }}</td>
          <td>{{ c.edad }}</td>
          <td>{{ c.identificacion }}</td>
          <td>{{ c.direccion }}</td>
          <td>{{ c.telefono }}</td>
          <td>{{ c.estado ? 'True' : 'False' }}</td>
          <td>
            <button class="secondary" (click)="handleEdit(c)">Editar</button>
            <button class="secondary" style="border-color: red; color: red;"
              (click)="handleDelete(c.id)">Eliminar</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>